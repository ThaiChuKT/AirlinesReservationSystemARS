@model ARS.ViewModels.ConfirmRescheduleViewModel
@{
    ViewData["Title"] = "Confirm Reschedule";
}

<div class="container mt-4">
    <h3>Confirm Reschedule for @Model.Reservation.ConfirmationNumber</h3>

    <div class="card mt-3">
        <div class="card-body">
            <p><strong>New Flight:</strong> @Model.NewFlight?.FlightNumber</p>
            <p><strong>New Date:</strong> @Model.NewDate.ToString("MMMM dd, yyyy")</p>
            <p><strong>New Total:</strong> ₱@Model.NewTotal.ToString("N2")</p>
            <p><strong>Amount Already Paid:</strong> ₱@Model.TotalPaid.ToString("N2")</p>

            @if (Model.Difference > 0)
            {
                <div class="alert alert-warning">Additional payment required: ₱@Model.Difference.ToString("N2")</div>
            }
            else if (Model.Difference < 0)
            {
                <div class="alert alert-success">A refund of ₱@Math.Abs(Model.Difference).ToString("N2") will be issued.</div>
            }
            else
            {
                <div class="alert alert-info">No price difference.</div>
            }

            <form asp-action="ConfirmReschedulePost" method="post">
                @Html.AntiForgeryToken()
                <input type="hidden" name="reservationId" value="@Model.Reservation.ReservationID" />
                <input type="hidden" name="flightId" value="@Model.NewFlight?.FlightID" />
                <input type="hidden" name="scheduleId" value="@Model.NewScheduleID" />
                <input type="hidden" name="newDate" value="@Model.NewDate" />

                <button type="submit" class="btn btn-primary">Confirm Reschedule</button>
                <a asp-action="Reschedule" asp-route-id="@Model.Reservation.ReservationID" class="btn btn-secondary ms-2">Back</a>
            </form>
        </div>
    </div>
</div>